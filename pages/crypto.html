<!DOCTYPE html>
<html>
  <head>
    <title>Encryption and Decryption</title>
  </head>
  <body>
    <h2>Encryption and Decryption Tool</h2>

    <div>
      <label for="inputText">Enter Text:</label>
      <input type="text" id="inputText" placeholder="Text to encrypt/decrypt" />
    </div>

    <div>
      <input type="checkbox" id="useSecretKey" />
      <label for="useSecretKey">Use Secret Key:</label>
      <input type="text" id="secretKey" placeholder="Secret Key" disabled />
    </div>

    <div>
      <button id="encryptButton">Encrypt</button>
      <button id="decryptButton">Decrypt</button>
    </div>

    <div>
      <label>Result:</label>
      <div id="output"></div>
    </div>

    <!-- Include crypto-js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.js"></script>

    <script>
      const inputText = document.getElementById("inputText");
      const useSecretKeyCheckbox = document.getElementById("useSecretKey");
      const secretKeyInput = document.getElementById("secretKey");
      const encryptButton = document.getElementById("encryptButton");
      const decryptButton = document.getElementById("decryptButton");
      const outputDiv = document.getElementById("output");

      // Function to encrypt data
      function encrypt(text, secretKey) {
        const encryptedText = CryptoJS.AES.encrypt(text, secretKey).toString();
        return encryptedText;
      }

      // Function to decrypt data
      function decrypt(encryptedText, secretKey) {
        const decryptedText = CryptoJS.AES.decrypt(
          encryptedText,
          secretKey
        ).toString(CryptoJS.enc.Utf8);
        return decryptedText;
      }

      // Encrypt button click event
      encryptButton.addEventListener("click", () => {
        const text = inputText.value;
        const useSecretKey = useSecretKeyCheckbox.checked;
        const secretKey = useSecretKey ? secretKeyInput.value : ""; // Use empty string if no secret key

        if (text) {
          try {
            const encryptedText = encrypt(text, secretKey);
            outputDiv.textContent = "Encrypted: " + encryptedText;
          } catch (error) {
            outputDiv.textContent = "Encryption error: " + error;
          }
        } else {
          outputDiv.textContent = "Please enter text.";
        }
      });

      // Decrypt button click event
      decryptButton.addEventListener("click", () => {
        const encryptedText = inputText.value;
        const useSecretKey = useSecretKeyCheckbox.checked;
        const secretKey = useSecretKey ? secretKeyInput.value : ""; // Use empty string if no secret key

        if (encryptedText) {
          try {
            const decryptedText = decrypt(encryptedText, secretKey);
            outputDiv.textContent = "Decrypted: " + decryptedText;
          } catch (error) {
            outputDiv.textContent = "Decryption error: " + error;
          }
        } else {
          outputDiv.textContent = "Please enter encrypted text.";
        }
      });

      // Toggle the visibility of the secret key input
      useSecretKeyCheckbox.addEventListener("change", () => {
        secretKeyInput.disabled = !useSecretKeyCheckbox.checked;
      });
    </script>
  </body>
</html>
