<!DOCTYPE html>
<html>
  <head>
    <title>Encryption and Decryption</title>
  </head>
  <body>
    <h2>Encryption and Decryption Tool</h2>

    <div>
      <label for="inputText">Enter Text:</label>
      <input type="text" id="inputText" placeholder="Text to encrypt/decrypt" />
    </div>

    <div>
      <label>Choose Encryption/Decryption Type:</label>
      <select id="encryptionType">
        <option value="aes">AES</option>
        <option value="simple">Simple</option>
      </select>
    </div>

    <div>
      <input type="checkbox" id="useSecretKey" />
      <label for="useSecretKey">Use Secret Key:</label>
      <input
        type="text"
        id="secretKey"
        placeholder="Secret Key"
        style="display: none"
      />
    </div>

    <div>
      <button id="encryptButton">Encrypt</button>
      <button id="decryptButton">Decrypt</button>
    </div>

    <div>
      <label>Result:</label>
      <div id="output"></div>
    </div>

    <!-- Include crypto-js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.js"></script>

    <script>
      const inputText = document.getElementById("inputText");
      const encryptionTypeSelect = document.getElementById("encryptionType");
      const useSecretKeyCheckbox = document.getElementById("useSecretKey");
      const secretKeyInput = document.getElementById("secretKey");
      const encryptButton = document.getElementById("encryptButton");
      const decryptButton = document.getElementById("decryptButton");
      const outputDiv = document.getElementById("output");

      // Function to encrypt data with AES
      function encryptWithAES(text, secretKey) {
        const encryptedText = CryptoJS.AES.encrypt(text, secretKey).toString();
        return encryptedText;
      }

      // Function to decrypt data with AES
      function decryptWithAES(encryptedText, secretKey) {
        const decryptedText = CryptoJS.AES.decrypt(
          encryptedText,
          secretKey
        ).toString(CryptoJS.enc.Utf8);
        return decryptedText;
      }

      // Function to encrypt data with simple string (Base64 encoding)
      function encryptSimple(text, secretKey) {
        // Simple encryption logic
        // Replace this with your custom encryption logic
        return btoa(text + secretKey);
      }

      // Function to decrypt data with simple string (Base64 encoding)
      function decryptSimple(encryptedText, secretKey) {
        // Simple decryption logic
        // Replace this with your custom decryption logic
        const decryptedText = atob(encryptedText);
        return decryptedText.replace(secretKey, "");
      }

      // Encrypt/Decrypt button click event
      function handleEncryption(type) {
        const text = inputText.value;
        const useSecretKey = useSecretKeyCheckbox.checked;
        const secretKey = useSecretKey ? secretKeyInput.value : "";

        if (text) {
          try {
            let result = "";

            if (type === "aes") {
              result = useSecretKey
                ? encryptWithAES(text, secretKey)
                : decryptWithAES(text, secretKey);
            } else if (type === "simple") {
              result = useSecretKey
                ? encryptSimple(text, secretKey)
                : decryptSimple(text, secretKey);
            }

            outputDiv.textContent =
              type === "aes"
                ? `AES ${useSecretKey ? "Encrypted" : "Decrypted"}: ${result}`
                : `Simple ${
                    useSecretKey ? "Encrypted" : "Decrypted"
                  }: ${result}`;
          } catch (error) {
            outputDiv.textContent = `Error: ${error}`;
          }
        } else {
          outputDiv.textContent = "Please enter text.";
        }
      }

      // Button click event for both Encrypt and Decrypt buttons
      encryptButton.addEventListener("click", () => {
        const encryptionType = encryptionTypeSelect.value;
        handleEncryption(encryptionType);
      });

      decryptButton.addEventListener("click", () => {
        const encryptionType = encryptionTypeSelect.value;
        handleEncryption(encryptionType);
      });

      // Toggle the visibility of the secret key input
      useSecretKeyCheckbox.addEventListener("change", () => {
        if (useSecretKeyCheckbox.checked) {
          secretKeyInput.style.display = "inline-block";
        } else {
          secretKeyInput.style.display = "none";
        }
      });

      // Change event for encryption type
      encryptionTypeSelect.addEventListener("change", () => {
        const selectedType = encryptionTypeSelect.value;
        if (selectedType === "aes") {
          useSecretKeyCheckbox.checked = false;
          secretKeyInput.style.display = "none";
        } else {
          secretKeyInput.style.display = useSecretKeyCheckbox.checked
            ? "inline-block"
            : "none";
        }
      });
    </script>
  </body>
</html>
