<!DOCTYPE html>
<html>
  <head>
    <title>Encryption and Decryption</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@mui/material@5.2.3/dist/material-design-icons-iconfont/dist/material-design-icons.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@mui/material@5.2.3/dist/material-ui-icons/material-ui-icons.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@mui/material@5.2.3/dist/material-ui-ripple-styles@5.2.3/dist/ripple.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@mui/material@5.2.3/dist/material-ui-ripple-styles@5.2.3/dist/ripple.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
    />
  </head>
  <body>
    <div class="container">
      <div class="row">
        <h2 class="center-align">Encryption and Decryption</h2>
      </div>
      <div class="row">
        <div class="col s12 m6">
          <img
            src="https://detectivepikachu.pokemon.com/_images/characters/pikachu-intro.png"
            alt="Pikachu"
            class="responsive-img center-align"
            height="200px"
          />
        </div>
        <div class="col s12 m6">
          <div class="row">
            <div class="input-field col s12">
              <label for="inputText">Enter Text:</label>
              <input
                type="text"
                id="inputText"
                placeholder="Text to encrypt/decrypt"
              />
            </div>
          </div>
          <div class="row">
            <div class="input-field col s12">
              <input type="checkbox" id="useSecretKey" class="filled-in" />
              <label for="useSecretKey">Use Secret Key</label>
            </div>
          </div>
          <div class="row">
            <div class="input-field col s12">
              <input
                type="text"
                id="secretKey"
                placeholder="Secret Key"
                disabled
              />
            </div>
          </div>
          <div class="row">
            <div class="input-field col s12">
              <button id="encryptButton" class="waves-effect waves-light btn">
                Encrypt
              </button>
              <button id="decryptButton" class="waves-effect waves-light btn">
                Decrypt
              </button>
            </div>
          </div>
          <div class="row">
            <div class="input-field col s12">
              <label for="outputText">Result:</label>
              <textarea id="outputText" class="materialize-textarea"></textarea>
            </div>
          </div>
          <div class="row">
            <button id="copyButton" class="waves-effect waves-light btn">
              Copy
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Include Materialize JavaScript for notifications -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <!-- Include crypto-js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.js"></script>

    <script>
      // Function to show a Materialize toast notification
      function showToast(message) {
        M.toast({ html: message });
      }

      // Function to encrypt data
      function encrypt(text, secretKey) {
        const encryptedText = CryptoJS.AES.encrypt(text, secretKey).toString();
        return encryptedText;
      }

      // Function to decrypt data
      function decrypt(encryptedText, secretKey) {
        const decryptedText = CryptoJS.AES.decrypt(
          encryptedText,
          secretKey
        ).toString(CryptoJS.enc.Utf8);
        return decryptedText;
      }

      const inputText = document.getElementById("inputText");
      const useSecretKeyCheckbox = document.getElementById("useSecretKey");
      const secretKeyInput = document.getElementById("secretKey");
      const encryptButton = document.getElementById("encryptButton");
      const decryptButton = document.getElementById("decryptButton");
      const outputText = document.getElementById("outputText");
      const copyButton = document.getElementById("copyButton");

      useSecretKeyCheckbox.addEventListener("change", () => {
        secretKeyInput.style.display = useSecretKeyCheckbox.checked
          ? "block"
          : "none";
        secretKeyInput.disabled = !useSecretKeyCheckbox.checked;
      });

      copyButton.addEventListener("click", () => {
        const textToCopy = outputText.value;
        if (textToCopy) {
          const tempInput = document.createElement("input");
          tempInput.value = textToCopy;
          document.body.appendChild(tempInput);
          tempInput.select();
          document.execCommand("copy");
          document.body.removeChild(tempInput);
          showToast("Text has been copied");
        }
      });

      encryptButton.addEventListener("click", () => {
        const text = inputText.value;
        const useSecretKey = useSecretKeyCheckbox.checked;
        const secretKey = useSecretKey ? secretKeyInput.value : "";

        if (text) {
          try {
            const encryptedText = encrypt(text, secretKey);
            outputText.value = encryptedText;
            outputText.style.fontWeight = "bold";
          } catch (error) {
            outputText.value = "Encryption error: " + error;
          }
        } else {
          outputText.value = "Please enter text.";
        }
      });

      decryptButton.addEventListener("click", () => {
        const encryptedText = inputText.value;
        const useSecretKey = useSecretKeyCheckbox.checked;
        const secretKey = useSecretKey ? secretKeyInput.value : "";

        if (encryptedText) {
          try {
            const decryptedText = decrypt(encryptedText, secretKey);
            outputText.value = decryptedText;
            outputText.style.fontWeight = "bold";
          } catch (error) {
            outputText.value = "Decryption error: " + error;
          }
        } else {
          outputText.value = "Please enter encrypted text.";
        }
      });
    </script>
  </body>
</html>
